// Compiled by ClojureScript 0.0-2341
goog.provide('yuggoth.pages.home');
goog.require('cljs.core');
goog.require('yuggoth.components.sidebar');
goog.require('yuggoth.components.comments');
goog.require('reagent.core');
goog.require('yuggoth.util');
goog.require('yuggoth.util');
goog.require('yuggoth.components.comments');
goog.require('yuggoth.components.sidebar');
goog.require('yuggoth.session');
goog.require('yuggoth.session');
goog.require('reagent.core');
goog.require('reagent.core');
goog.require('secretary.core');
goog.require('secretary.core');
yuggoth.pages.home.toggle_public_BANG_ = (function toggle_public_BANG_(){return yuggoth.util.POST.call(null,"/toggle-post",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"post","post",269697687),cljs.core.select_keys.call(null,yuggoth.session.get.call(null,new cljs.core.Keyword(null,"post","post",269697687)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"id","id",-1388402092),new cljs.core.Keyword(null,"public","public",1566243851)], null))], null),new cljs.core.Keyword(null,"handler","handler",-195596612),(function (p__5683){var vec__5684 = p__5683;var result = cljs.core.nth.call(null,vec__5684,(0),null);if((result > (0)))
{yuggoth.util.set_recent_BANG_.call(null);
return yuggoth.session.update_in_BANG_.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"public","public",1566243851)], null),cljs.core.not);
} else
{return null;
}
})], null));
});
yuggoth.pages.home.fetch_post = (function fetch_post(next_QMARK_){return yuggoth.util.GET.call(null,"/blog-post",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"params","params",710516235),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"id","id",-1388402092),yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),(cljs.core.truth_(next_QMARK_)?new cljs.core.Keyword(null,"next","next",-117701485):new cljs.core.Keyword(null,"last","last",1105735132))], null))], null),new cljs.core.Keyword(null,"handler","handler",-195596612),(function (p1__5685_SHARP_){yuggoth.util.set_current_post_BANG_.call(null,p1__5685_SHARP_);
return yuggoth.util.set_post_url.call(null,p1__5685_SHARP_);
})], null));
});
yuggoth.pages.home.tags = (function tags(){return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),cljs.core.map.call(null,(function (tag){return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.util.link,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"tag"], null),("#/tag/"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(tag)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.tagon","span.tagon",-103355737),tag], null)], null);
}),yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"tags","tags",1771418977)], null)))], null);
});
yuggoth.pages.home.admin_forms = (function admin_forms(){return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.post-admin-menu","div.post-admin-menu",154994665),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.leftmost","div.leftmost",205573251),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button","span.button",-541834575),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){return yuggoth.pages.home.toggle_public_BANG_.call(null);
})], null),(cljs.core.truth_(yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"public","public",1566243851)], null)))?yuggoth.util.text.call(null,new cljs.core.Keyword(null,"hide","hide",-596913169)):yuggoth.util.text.call(null,new cljs.core.Keyword(null,"show","show",-576705889)))], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.leftmost","div.leftmost",205573251),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button","span.button",-541834575),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){return yuggoth.util.set_location_BANG_.call(null,"#/edit-post");
})], null),yuggoth.util.text.call(null,new cljs.core.Keyword(null,"edit","edit",-1641834166))], null)], null)], null);
});
yuggoth.pages.home.post_nav = (function post_nav(){return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.postnav","div.postnav",-655162852),(cljs.core.truth_(yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"last","last",1105735132)], null)))?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button.leftmost","span.button.leftmost",-1628587620),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){return yuggoth.pages.home.fetch_post.call(null,false);
})], null),("\u2AA6"+cljs.core.str.cljs$core$IFn$_invoke$arity$1(yuggoth.util.text.call(null,new cljs.core.Keyword(null,"previous","previous",-720163404))))], null):null),(cljs.core.truth_(yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"next","next",-117701485)], null)))?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.button.rightmost","span.button.rightmost",-376940905),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (){return yuggoth.pages.home.fetch_post.call(null,true);
})], null),(''+cljs.core.str.cljs$core$IFn$_invoke$arity$1(yuggoth.util.text.call(null,new cljs.core.Keyword(null,"next","next",-117701485)))+"\u2AA7")], null):null)], null);
});
yuggoth.pages.home.loading_spinner = (function loading_spinner(){return new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.spinner","div.spinner",-1989566624),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.rect1","div.rect1",1412522864)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.rect2","div.rect2",-1080337538)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.rect3","div.rect3",-53603390)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.rect4","div.rect4",-1156492781)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.rect5","div.rect5",-1525933730)], null)], null);
});
yuggoth.pages.home.home_page = (function home_page(){var map__5687 = yuggoth.session.get.call(null,new cljs.core.Keyword(null,"post","post",269697687));var map__5687__$1 = ((cljs.core.seq_QMARK_.call(null,map__5687))?cljs.core.apply.call(null,cljs.core.hash_map,map__5687):map__5687);var author = cljs.core.get.call(null,map__5687__$1,new cljs.core.Keyword(null,"author","author",2111686192));var title = cljs.core.get.call(null,map__5687__$1,new cljs.core.Keyword(null,"title","title",636505583));var time = cljs.core.get.call(null,map__5687__$1,new cljs.core.Keyword(null,"time","time",1385887882));var content = cljs.core.get.call(null,map__5687__$1,new cljs.core.Keyword(null,"content","content",15833224));var id = cljs.core.get.call(null,map__5687__$1,new cljs.core.Keyword(null,"id","id",-1388402092));yuggoth.util.set_title_BANG_.call(null,title);
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.contents","div.contents",-1428662400),(cljs.core.truth_(id)?new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),(cljs.core.truth_(yuggoth.session.get.call(null,new cljs.core.Keyword(null,"mobile?","mobile?",1358664528)))?"post-mobile":"post")], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.entry-title","div.entry-title",1921453503),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",-372662728),title], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span","span",1394872991),time], null)], null),(cljs.core.truth_((function (){var and__3563__auto__ = yuggoth.session.get.call(null,new cljs.core.Keyword(null,"admin","admin",-1239101627));if(cljs.core.truth_(and__3563__auto__))
{return (yuggoth.session.get_in.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"post","post",269697687),new cljs.core.Keyword(null,"id","id",-1388402092)], null)) > (0));
} else
{return and__3563__auto__;
}
})())?new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.pages.home.admin_forms], null):null),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.entry-content","div.entry-content",1928114261),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.post-content","div.post-content",-1854414052),yuggoth.util.markdown.call(null,content)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.pages.home.tags], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.pages.home.post_nav], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"br","br",934104792)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.components.comments.comments], null)], null)], null):new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.pages.home.loading_spinner], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [yuggoth.components.sidebar.sidebar], null)], null);
});

//# sourceMappingURL=home.js.map